<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" th:replace="base::layout(~{::section})">
<head>
	<meta charset="UTF-8" />
	<title></title>
</head>
<body>
	<section>
	<div class="container-fluid">
      <div class="card">
        <div class="text-center bg-dark">
          <img
            th:src="@{${udetail.profilepic}}"
            alt="profile_pic"
            class="rounded-circle text-center m-3"
            style="height: 20vh; width: 20vh"
          />
          <div class="text-right mx-2" th:if="${follow==true}">
            <ul class="list-inline" ng-app="follow">
              <li class="list-inline-item" ng-controller="followcontroller" ng-init="followedornot();">
                <button class="btn btn-primary" ng-click="followfun();">{{followbutton}}</button>
              </li>
              <li class="list-inline-item">
                <button class="btn bg-white">...</button>
              </li>
            </ul>
          </div>
          <div class="text-right mx-2" th:if="${follow==false}">
            <ul class="list-inline">
              <li class="list-inline-item">
                <a href="/user/settings" class="btn btn-success"><i class="fa fa-cogs" aria-hidden="true"></i>&nbsp;Edit Profile</a>
              </li>
            </ul>
          </div>
          
          
        </div>

        <p class="card-title text-center mt-2 h3" th:text="${udetail.name}"></p>
        <div class="card-title text-center mt-1" th:text="${udetail.aboutme}">
          
        </div>
        <div class="card-body text-center">
          <ul class="list-inline">
            <li class="list-inline-item">
              <i class="fa fa-birthday-cake mx-1" aria-hidden="true"></i>Joined
              on <span th:text="${#dates.format(udetail.joinedon, 'dd-MM-yyyy HH:mm')}"></span>
            </li>
            <li class="list-inline-item">
              <i class="fa fa-map-marker mx-1" aria-hidden="true"></i> India
            </li>
            <li class="list-inline-item" th:if="${udetail.twitterid != null}">
              <a th:href="@{|http://twitter.com/${udetail.twitterid}|}" target="_blank"
                ><i class="fa fa-twitter" aria-hidden="true"></i
              ></a>
            </li>
            <li class="list-inline-item" th:if="${udetail.fbid != null}">
              <a th:href="@{|https://www.facebook.com/${udetail.fbid}|}" target="_blank">
                <i class="fa fa-facebook-square" aria-hidden="true"></i
              ></a>
            </li>
            <li class="list-inline-item" th:if="${udetail.instaid != null}">
              <a th:href="@{|https://www.instagram.com/${udetail.instaid}|}" target="_blank">
                <i class="fa fa-instagram" aria-hidden="true"></i
              ></a>
            </li>
            <li class="list-inline-item" th:if="${udetail.githubid != null}">
              <a th:href="@{|https://github.com/${udetail.githubid}|}" target="_blank">
                <i class="fa fa-github" aria-hidden="true"></i
              ></a>
            </li>
          </ul>
        </div>

        <div class="card text-center p-2">
          Studies at<br />
          Centurion University,<span th:if="${udetail.collegename == 'CUTM,PKD'}" th:text="Paralakhemundi"></span>
          <span th:if="${udetail.collegename == 'CUTM,BBSR'}" th:text="Bhubaneswar"></span>
          <span th:if="${udetail.collegename == 'CUTM,VIZAG'}" th:text="Vizag"></span>
      </div>
    </div>
    <div class="container-fluid mt-4">
      <div class="row">
        <div class="col-md-2">
          <div class="card">
            <div class="card">
              <ul class="list-inline my-1">
                <li class="list-item"><span th:text="${noofpost}"></span> Posts Published</li>
                <li class="list-item"><span th:text="${noofcomment}"></span> Comments Written</li>
                <li class="list-item"><b>*</b> people Followed</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-7">
        <!-- Post starts From Here  -->
          <div class="card" th:each="post: ${listofPost}" th:unless="${listofPost.empty}">
            <div class="card mb-2 border border-dark">
              <img
              th:if="${post.postHeadImage != null}"
                class="card-img-top"
                th:src="@{${post.postHeadImage}}"
                alt="Card image cap"
              />
              <div class="card-body">
                <h2 class="card-title" th:text="${post.postHeading}">
                </h2>
                <p class="card-text" th:utext="${post.postDescription}" th:if="${post.postDescription != null}">
                </p>
                <a th:href="@{|/user/post/${post.pid}|}" class="btn btn-primary"
                  >Read Post üì™</a
                >
              </div>
              <div class="card-footer text-muted">
                Posted on <span th:text="${#dates.format(post.postedon, 'dd-MM-yyyy HH:mm')}"></span> by
                <a th:href="@{|/user/user/${post.id}|}"><span th:text="${post.authorName}"></span></a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card my-4 border border-dark">
            <h5 class="card-header bg-primary text-white border border-dark">
              Side Widget
            </h5>
            <div class="card-body">
              Lorem ipsum dolor sit amet consectetur adipisicing elit.
              Praesentium quae consequatur neque ipsa provident, voluptatibus
              quasi minus natus nesciunt quas temporibus qui quidem nisi
              voluptate iste dolores, error officiis veritatis!
            </div>
          </div>
          <div class="card my-2 border border-dark">
            <h5 class="card-header bg-primary text-white border border-dark">
              #Ô∏è‚É£ Tags
            </h5>
            <div class="card-body">
              <div class="row">
                <div class="col-lg-6">
                  <ul class="list-unstyled mb-0">
                    <li>
                      <a href="#">#Web Design</a>
                    </li>
                    <li>
                      <a href="#">#HTML</a>
                    </li>
                    <li>
                      <a href="#">#Freebies</a>
                    </li>
                  </ul>
                </div>
                <div class="col-lg-6">
                  <ul class="list-unstyled mb-0">
                    <li>
                      <a href="#">#JavaScript</a>
                    </li>
                    <li>
                      <a href="#">#CSS</a>
                    </li>
                    <li>
                      <a href="#">#Tutorials</a>
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
    var app=angular.module("follow",[]);
    app.controller("followcontroller",($scope,$http)=>{
    	var url1="/user/api/followedornot/[[${udetail.uid}]]";
    	var url2="/user/api/follow/[[${udetail.uid}]]";
    	//this function is to follow 
    	$scope.followfun=()=>{
    		$http.get(url2).then(()=>{
    			$scope.followedornot()
    		});
    	}
    	//this function is to get the followStatus 
    	$scope.followedornot=()=>{
    		$http.get(url1).then(
    		(response)=>
    		{
    			//console.log(response);
    			var status=response.data.followed;
    			if(status==0)
    				{
    				$scope.followbutton="Follow ‚úÖ";
    				}
    			else
    				{
    				$scope.followbutton="UnFollow ‚ùå";
    				}
    		}
    		,
    		(error)=>
    		{
    			console.log(error);
    			console.log("error Occured !");
    		}		
    		)
    	}
    	
    	
    	
    });
    </script>
	</section>
	
</body>
</html>